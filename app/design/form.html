<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulario de Denuncia</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
</head>
<body class="bg-gray-900 text-white min-h-screen">
  <!-- Barra superior -->
  <div
    class="w-full flex justify-between items-center px-4 py-2 bg-black border-b border-gray-800 fixed top-0 z-20"
  >
    <div class="text-xl cursor-pointer" onclick="toggleMenu()">
      <i class="fas fa-bars"></i>
    </div>
    <div class="w-1/2">
      <input
        type="text"
        placeholder="Buscar"
        class="w-full p-1 px-3 rounded bg-gray-800 text-white focus:outline-none"
      />
    </div>
    <div class="text-xl cursor-pointer" onclick="toggleProfile()">
      <i class="fas fa-user-circle"></i>
    </div>
  </div>

  <!-- Menú lateral -->
  <div
    id="sideMenu"
    class="fixed top-0 left-0 w-64 h-full bg-gray-800 text-white transform -translate-x-full transition-transform duration-300 z-30"
  >
    <div
      class="p-4 border-b border-gray-700 text-lg font-bold flex justify-between items-center"
    >
      <span>Menú</span>
      <button onclick="toggleMenu()" class="text-white hover:text-purple-400">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <ul class="p-4 space-y-2">
      <li><a href="#" class="block hover:text-purple-400">Iniciar Sesión</a></li>
      <li>
  <button
    onclick="toggleAboutModal()"
    class="w-full text-left hover:text-purple-400 focus:outline-none"
  >
    Acerca de la página
  </button>
<li>
  <button
    onclick="toggleContactModal()"
    class="w-full text-left hover:text-purple-400 focus:outline-none"
  >
    Contacto
  </button>
</li>

  </div>

  <!-- Perfil desplegable -->
  <div
    id="profileMenu"
    class="fixed top-12 right-4 w-64 bg-gray-800 text-white rounded shadow-lg hidden z-30"
  >
    <div class="p-4 border-b border-gray-700 font-semibold">Perfil de Usuario</div>
    <ul class="p-4 space-y-2">
      <li><a href="#" class="block hover:text-purple-400">Ver perfil</a></li>
      <li><a href="#" class="block hover:text-purple-400">Configuración</a></li>
      <li><a href="#" class="block hover:text-purple-400">Cerrar sesión</a></li>
    </ul>
  </div>

  <div class="flex flex-col lg:flex-row h-screen pt-14">
    <!-- Panel Izquierdo - Formulario -->
    <div
      class="w-full lg:w-1/3 bg-black p-6 flex flex-col gap-6 overflow-y-auto"
    >
      <div>
        <h1 class="text-3xl font-bold mb-2">Formulario de Denuncia</h1>
        <p class="text-sm text-gray-400">
          Rellena los espacios con información sobre tu denuncia de forma
          anónima.
        </p>
      </div>

      <!-- Campos del formulario -->
      <div class="flex flex-col gap-3">
        <input
          type="text"
          placeholder="Título de la denuncia"
          class="bg-gray-800 p-2 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
        <textarea
          placeholder="Descripción detallada"
          rows="4"
          class="bg-gray-800 p-2 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
        ></textarea>
        <input
          type="text"
          placeholder="Categoría"
          class="bg-gray-800 p-2 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
        />

        <!-- Subida de archivos -->
        <label class="block mt-2 text-sm text-gray-400"
          >Sube archivos (foto, video o evidencia):</label
        >
        <input
          type="file"
          multiple
          class="bg-gray-800 p-2 rounded focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700"
        />
      </div>

      <!-- Ubicación -->
      <div class="flex flex-col gap-4">
        <select
          id="departamento"
          class="bg-gray-800 p-2 rounded text-white"
        >
          <option value="">Seleccione Departamento</option>
        </select>

        <select
          id="provincia"
          class="bg-gray-800 p-2 rounded text-white"
          disabled
        >
          <option value="">Seleccione Provincia</option>
        </select>

        <select
          id="distrito"
          class="bg-gray-800 p-2 rounded text-white"
          disabled
        >
          <option value="">Seleccione Distrito</option>
        </select>
      </div>

      <!-- Botón de Enviar -->
      <div class="mt-4">
        <button
          class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-purple-400"
        >
          Subir Denuncia
        </button>
      </div>
    </div>

    <!-- Panel Derecho - Mapa Google Maps -->
    <div class="w-full lg:w-2/3 relative h-full">
      <div id="map" class="w-full h-full"></div>
    </div>
  </div>

  <script>
    function toggleMenu() {
      const menu = document.getElementById("sideMenu");
      menu.classList.toggle("-translate-x-full");
    }

    function toggleProfile() {
      const profile = document.getElementById("profileMenu");
      profile.classList.toggle("hidden");
    }

    let map;
    let marker;
    let geocoder;
    let heatmap;

    function initMap() {
      const centroInicial = { lat: -9.189967, lng: -75.015152 }; // Perú

      map = new google.maps.Map(document.getElementById("map"), {
        center: centroInicial,
        zoom: 5,
        mapTypeControl: false,
        styles: [
          { elementType: "geometry", stylers: [{ color: "#1f2937" }] },
          { elementType: "labels.text.fill", stylers: [{ color: "#f3f4f6" }] },
          { elementType: "labels.text.stroke", stylers: [{ color: "#1f2937" }] },
          {
            featureType: "administrative",
            elementType: "geometry",
            stylers: [{ color: "#374151" }],
          },
          {
            featureType: "poi",
            elementType: "labels.text.fill",
            stylers: [{ color: "#d1d5db" }],
          },
        ],
      });

      marker = new google.maps.Marker({ map });
      geocoder = new google.maps.Geocoder();

      // Datos de ejemplo para el heatmap (lat, lng)
      const heatmapData = [
        new google.maps.LatLng(-12.0464, -77.0428), // Lima
        new google.maps.LatLng(-16.4090, -71.5375), // Arequipa
        new google.maps.LatLng(-13.1631, -72.5450), // Cusco
        new google.maps.LatLng(-8.1091, -79.0215),  // Trujillo
        new google.maps.LatLng(-6.7687, -79.8365),  // Chiclayo
      ];

      heatmap = new google.maps.visualization.HeatmapLayer({
        data: heatmapData,
        map: map,
        radius: 40,
      });
    }

    function centrarEnMapa(departamento, provincia, distrito) {
      if (!departamento || !provincia || !distrito) return;

      const direccion = `${distrito}, ${provincia}, ${departamento}, Perú`;
      geocoder.geocode({ address: direccion }, (results, status) => {
        if (status === "OK") {
          const ubicacion = results[0].geometry.location;
          map.setCenter(ubicacion);
          map.setZoom(14);
          marker.setPosition(ubicacion);
        } else {
          console.warn("Geocode falló:", status);
          alert("No se encontró la ubicación seleccionada");
        }
      });
    }

    // Exportar la función para que la pueda usar ubigeo.js o selects.js
    window.centrarEnMapa = centrarEnMapa;
  </script>

  <script type="module" src="js/selects.js"></script>
  <script
    async
    defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgkrs_qQFsvwKYn7kPyFIl_WobRist4_M&libraries=visualization&callback=initMap"
  ></script>
  <script src="./js/principal.js"></script>

  <!-- Modal Acerca de la página -->
<div
  id="aboutModal"
  class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-40 hidden"
>
  <div
    class="bg-gray-900 rounded-lg max-w-lg w-11/12 p-6 shadow-lg text-white relative"
  >
    <button
      onclick="toggleAboutModal()"
      class="absolute top-3 right-3 text-gray-400 hover:text-purple-500 text-2xl font-bold"
      aria-label="Cerrar Acerca de"
    >
      &times;
    </button>
    <h2 class="text-2xl font-bold mb-4">Acerca de la Página</h2>
    <p class="mb-2">
      Esta plataforma fue diseñada para facilitar la denuncia anónima y segura, 
      proporcionando una interfaz intuitiva y un mapa interactivo que ayuda a visualizar las ubicaciones de los reportes.
    </p>
    <p class="mb-2">
      Nuestro compromiso es la privacidad y la transparencia, 
      asegurando que los usuarios puedan participar de forma segura y sin temor a represalias.
    </p>
    <p class="mb-4 text-sm text-gray-400 italic">
      Desarrollado Por BlackMount Corporation
    </p>
    <div class="text-right">
      <button
        onclick="toggleAboutModal()"
        class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded font-semibold focus:outline-none focus:ring-2 focus:ring-purple-400"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal de Contacto -->
<div
  id="contactModal"
  class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-40 hidden"
>
  <div
    class="bg-gray-900 rounded-lg max-w-lg w-11/12 p-6 shadow-lg text-white relative"
  >
    <button
      onclick="toggleContactModal()"
      class="absolute top-3 right-3 text-gray-400 hover:text-purple-500 text-2xl font-bold"
      aria-label="Cerrar Contacto"
    >
      &times;
    </button>
    <h2 class="text-2xl font-bold mb-4">Contacto</h2>
    <form action="https://formspree.io/f/mqaqnjkg" method="POST">
  <div class="mb-4">
    <label class="block mb-1 text-sm" for="nombre">Nombre</label>
    <input
      type="text"
      name="nombre"
      class="w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none"
      required
    />
  </div>
  <div class="mb-4">
    <label class="block mb-1 text-sm" for="correo">Correo</label>
    <input
      type="email"
      name="correo"
      class="w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none"
      required
    />
  </div>
  <div class="mb-4">
    <label class="block mb-1 text-sm" for="mensaje">Mensaje</label>
    <textarea
      name="mensaje"
      rows="4"
      class="w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none"
      required
    ></textarea>
  </div>
  <div class="flex justify-end">
    <button
      type="button"
      onclick="toggleContactModal()"
      class="mr-2 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded"
    >
      Cancelar
    </button>
    <button
      type="submit"
      class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded font-semibold focus:outline-none focus:ring-2 focus:ring-purple-400"
    >
      Enviar
    </button>
  </div>
</form>
  </div>
</div>


</body>
</html>
